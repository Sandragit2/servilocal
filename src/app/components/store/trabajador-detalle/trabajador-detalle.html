<div class="detalle-wrapper" *ngIf="trabajador">
  <button class="btn-regresar" routerLink="/store/services/{{ trabajador.categoria }}">
    ‚¨Ö Volver
  </button>

  <div class="card-detalle">
    <div class="perfil-header">
      <img
        [src]="urlBackend + trabajador.foto_trabajador"
        onerror="this.src='assets/img/default-user.png'"
        class="foto"
      />

      <div class="info-basica">
        <h2>{{ trabajador.nombre }} {{ trabajador.apellidos }}</h2>
        <p class="categoria">{{ trabajador.categoria | titlecase }}</p>
      </div>
    </div>

    <section class="section">
      <h3>Descripci√≥n</h3>
      <p>{{ trabajador.descripcion_trabajo || 'Sin descripci√≥n.' }}</p>
    </section>

    <!-- SECCI√ìN DE CONTACTO -->
    <section class="section contacto-acciones">
      <h3>Contacto directo</h3>

      <p *ngIf="!puedeContactar" class="text-danger">
        üîí Debes contratar primero para desbloquear el contacto.
      </p>

      <div class="acciones-grid">
        <button class="btn-action whatsapp"
                (click)="abrirWhatsApp()"
                [disabled]="!puedeContactar">
          WhatsApp
        </button>

        <button class="btn-action llamar"
                (click)="llamar()"
                [disabled]="!puedeContactar">
          Llamar
        </button>

        <button class="btn-action correo"
                (click)="enviarCorreo()"
                [disabled]="!puedeContactar">
          Correo
        </button>

        <button class="btn-action contratar"
                (click)="contratar()">
          Contratar ahora
        </button>
      </div>
    </section>

    <!-- RESE√ëAS -->
    <section class="section resenas">
      <h3>Rese√±as</h3>

      <div *ngIf="resenas.length > 0; else sinResenas">
        <div class="resena-card" *ngFor="let r of resenas">
          <strong>{{ r.cliente }}</strong>
          <span>‚≠ê {{ r.calificacion }}/5</span>
          <p>{{ r.comentarios }}</p>
          <small>{{ r.fecha_resena }}</small>
        </div>
      </div>

      <ng-template #sinResenas>
        <p class="no-resenas">A√∫n no hay rese√±as.</p>
      </ng-template>
    </section>
  </div>
</div>


