<!-- CONTENEDOR GENERAL -->
<div *ngIf="trabajador" class="perfil-wrapper">

  <!-- üîô Bot√≥n volver -->
  <button class="btn-volver" routerLink="/store/services/{{ trabajador.categoria }}">
    ‚¨Ö Regresar
  </button>

  <!-- üßë‚Äçüîß CABECERA -->
  <div class="perfil-header">
    <div class="foto-container">
      <img
        [src]="urlBackend + trabajador.foto_trabajador"
        alt="{{ trabajador.nombre }}"
        class="foto-trabajador"
        onerror="this.src='assets/img/default-user.png'"
      />
    </div>

    <div class="info-header">
      <h2>{{ trabajador.nombre }} {{ trabajador.apellidos }}</h2>

      <span class="categoria">{{ trabajador.categoria | titlecase }}</span>

      <!-- ‚≠ê Estrellas -->
      <div class="estrellas">
        <ng-container *ngIf="trabajador.calificacion_promedio; else sinCalif">
          <span *ngFor="let star of [1,2,3,4,5]" 
                class="star"
                [class.filled]="star <= trabajador.calificacion_promedio">‚òÖ</span>
          <span class="puntuacion">
            ({{ trabajador.calificacion_promedio }}/5)
          </span>
        </ng-container>

        <ng-template #sinCalif>
          <span class="no-calificacion">Sin calificaciones a√∫n</span>
        </ng-template>
      </div>
    </div>
  </div>

  <!-- üìù DESCRIPCI√ìN -->
  <div class="card-section">
    <h3>Descripci√≥n</h3>
    <p>{{ trabajador.descripcion_trabajo || 'El trabajador a√∫n no ha agregado una descripci√≥n.' }}</p>
  </div>

  <!-- üìû CONTACTO -->
  <div class="card-section">
    <h3>Informaci√≥n de contacto</h3>
    <p><i class="bi bi-telephone-fill text-primary"></i> <strong>Tel√©fono:</strong> {{ trabajador.telefono || 'No disponible' }}</p>
    <p><i class="bi bi-envelope-fill text-danger"></i> <strong>Correo:</strong> {{ trabajador.correo || 'No disponible' }}</p>
    <p><i class="bi bi-geo-alt-fill text-warning"></i> <strong>Ubicaci√≥n:</strong> {{ trabajador.ubicacion || 'No especificada' }}</p>
  </div>

  <!-- üìö EXPERIENCIA -->
  <div class="card-section">
    <h3>Experiencia</h3>
    <p>{{ trabajador.experiencia || 'A√∫n no se ha registrado experiencia.' }}</p>
  </div>

  <!-- üõ† HABILIDADES -->
  <div class="card-section">
    <h3>Habilidades</h3>
    <p>{{ trabajador.habilidades || 'Sin habilidades registradas.' }}</p>
  </div>

  <!-- ‚≠ê RESE√ëAS -->
  <div class="card-section resenas-section">
    <h3>Opiniones de clientes</h3>

    <div *ngIf="resenas.length > 0; else sinResenas">
      <div class="resena-card" *ngFor="let r of resenas">
        <div class="resena-header">
          <strong class="nombre-cliente">{{ r.cliente }}</strong>
          <span class="calif">‚≠ê {{ r.calificacion }}/5</span>
        </div>
        <p>{{ r.comentarios }}</p>
        <small class="fecha">{{ r.fecha_resena }}</small>
      </div>
    </div>

    <ng-template #sinResenas>
      <p class="no-resenas">Este trabajador a√∫n no tiene rese√±as.</p>
    </ng-template>
  </div>

</div>

<!-- Mensaje de carga -->
<div *ngIf="!trabajador" class="cargando">
  <div class="spinner"></div>
  <p>Cargando informaci√≥n del trabajador...</p>
</div>


